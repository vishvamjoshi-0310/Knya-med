{% if collection.metafields.custom.footer_seo != blank %}
  {{ 'collection-footer-seo.css' | asset_url | stylesheet_tag }}

  <style>
    .seo-col-main{
      margin-top:{{ section.settings.margintopseoc }}px;
      background: #F4ECD0;
    }
    @media only screen and (max-width:640px){
      .seo-col-main{
        margin-top:{{ section.settings.margintopseocmob }}px
      }
    }
  </style>

  <div class="seo-col-main">
    <div class="content-read-more-liquid container space page-width">
      <div class="content_wrapper">
        <div class="content seo-collection">
          {% assign getImageFromMeta = collection.metafields.custom.footer_seo.value | split: '##' %}
          {% assign shortDes = collection.metafields.custom.footer_seo_short_description.value %}
          <div class="shown_content font-heebo-medium">{{ getImageFromMeta[0] }}</div>
          <div class="font-heebo-regular p short-des desc-clamp">{{ shortDes }}</div>
          {% comment %} <p class="font-heebo-regular p short-des"> {{ shortDes }}</p> {% endcomment %}
          <div class="hiden_content font-heebo-regular">{{ getImageFromMeta[1] }}</div>
        </div>
        {% if getImageFromMeta[1] != blank %}
          <div class="btn-seo">
            <div class="readmore-icon-container">
              <img
                class="readmore-icon"
                src="https://cdn.shopify.com/s/files/1/0562/9247/5063/files/readmore-icon.svg?v=1706780289"
                alt="readmore-icon"
                width="18"
                height="18"
                loading="lazy"
              >
              {% render 'minus-icon' %}
            </div>
            {% comment %} <img src="{{ section.settings.bg-seo | img_url }}" class="read-bg-img"> {% endcomment %}
            <p class="readmore-col font-heebo-medium">Read More</p>
            <p class="readless-col font-heebo-medium">Read less</p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>

  <script>
    document.querySelector('.btn-seo').addEventListener('click', function () {
      let hiddenContent = document.querySelector('.hiden_content');
      let shortDesc = document.querySelector('.seo-col-main .short-des');

      if (!hiddenContent.classList.contains('content-visible')) {
        // this.style.display = 'none';
        // show content
        document.querySelector('.hiden_content').style.display = 'block';
        document.querySelector('.readmore-col').style.display = 'none';
        document.querySelector('.readmore-icon').style.display = 'none';

        document.querySelector('.readless-col').style.display = 'flex';
        document.querySelector('.readless-icon').style.display = 'block';
        hiddenContent.classList.add('content-visible');
        if (shortDesc.classList.contains('desc-clamp')) {
          shortDesc.classList.remove('desc-clamp');
        }
      } else {
        // hide content
        // this.style.display = 'none';
        document.querySelector('.hiden_content').style.display = 'none';
        document.querySelector('.readless-col').style.display = 'none';
        document.querySelector('.readless-icon').style.display = 'none';

        document.querySelector('.readmore-col').style.display = 'flex';
        document.querySelector('.readmore-icon').style.display = 'block';
        hiddenContent.classList.remove('content-visible');
        shortDesc.classList.add('desc-clamp');
      }
    });
    // document.querySelector('.btn-seo').addEventListener('click', function () {
    //   // this.style.display = 'none';
    //   document.querySelector('.hiden_content').style.display = 'none';
    //   document.querySelector('.readmore-col').style.display = 'flex';
    // });
  </script>
{% endif %}

{% schema %}
{
  "name": "SEO Footer For Collection",
  "settings": [
    {
      "type": "image_picker",
      "id": "bg-seo",
      "label": "read buttonn background"
    },
    {
      "type": "range",
      "id": "margintopseoc",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "margin from top for entire section",
      "default": 0
    },
    {
      "type": "range",
      "id": "margintopseocmob",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "margin from top for entire section",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "SEO footer for collection"
    }
  ],
  "templates": ["collection"]
}
{% endschema %}
